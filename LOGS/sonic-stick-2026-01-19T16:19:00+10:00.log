[2026-01-19T16:19:00+10:00] [INFO] Logging to /home/wizard/Code/sonic-stick/LOGS/sonic-stick-2026-01-19T16:19:00+10:00.log
[2026-01-19T16:19:00+10:00] [INFO] ============================================
[2026-01-19T16:19:00+10:00] [INFO] ============================================
[2026-01-19T16:19:00+10:00] [INFO] Sonic Stick Launcher
[2026-01-19T16:19:00+10:00] [INFO] Sonic Stick Launcher
[2026-01-19T16:19:00+10:00] [INFO] ============================================
[2026-01-19T16:19:00+10:00] [INFO] ============================================
[2026-01-19T16:19:00+10:00] [INFO] Target USB device: /dev/sdb (override with USB=/dev/sdX)
[2026-01-19T16:19:00+10:00] [INFO] Target USB device: /dev/sdb (override with USB=/dev/sdX)
[2026-01-19T16:19:00+10:00] [INFO] Ventoy version: 1.1.10
[2026-01-19T16:19:00+10:00] [INFO] Ventoy version: 1.1.10
[2026-01-19T16:19:00+10:00] [INFO] Repo: /home/wizard/Code/sonic-stick
[2026-01-19T16:19:00+10:00] [INFO] Repo: /home/wizard/Code/sonic-stick

Select an action:
  1) Download payloads (ISOs, Ventoy, Pi images)
  2) Install/Upgrade Ventoy only
  3) Rebuild from scratch (wipe, copy ISOs, create FLASH)
  4) Verify stick (check structure, config, offer fixes)
  5) Quit

Choice [1-5]: [2026-01-19T16:19:09+10:00] [INFO] ============================================
[2026-01-19T16:19:09+10:00] [INFO] ============================================
[2026-01-19T16:19:09+10:00] [INFO] USB Stick Verification
[2026-01-19T16:19:09+10:00] [INFO] USB Stick Verification
[2026-01-19T16:19:09+10:00] [INFO] ============================================
[2026-01-19T16:19:09+10:00] [INFO] ============================================

[2026-01-19T16:19:09+10:00] [INFO] Checking USB structure...
[2026-01-19T16:19:09+10:00] [INFO] Checking USB structure...

NAME     SIZE FSTYPE LABEL
sdb    114.6G        
â”œâ”€sdb1 114.6G exfat  SONIC
â””â”€sdb2    32M vfat   VTOYEFI

[2026-01-19T16:19:09+10:00] [OK] âœ“ Ventoy bootloader (VTOYEFI) detected
[2026-01-19T16:19:09+10:00] [OK] âœ“ Ventoy bootloader (VTOYEFI) detected

[2026-01-19T16:19:09+10:00] [OK] âœ“ SONIC main partition found (/dev/sdb1)
[2026-01-19T16:19:09+10:00] [OK] âœ“ SONIC main partition found (/dev/sdb1)

[2026-01-19T16:19:09+10:00] [WARN] âš  FLASH partition not found (optional)
[2026-01-19T16:19:09+10:00] [WARN] âš  FLASH partition not found (optional)

[2026-01-19T16:19:09+10:00] [INFO] Checking configuration and ISOs...
[2026-01-19T16:19:09+10:00] [INFO] Checking configuration and ISOs...
[2026-01-19T16:19:10+10:00] [OK] âœ“ ventoy.json is valid
[2026-01-19T16:19:10+10:00] [OK] âœ“ ventoy.json is valid
[2026-01-19T16:19:10+10:00] [OK] âœ“ Found 5 ISO(s) ready to boot
[2026-01-19T16:19:10+10:00] [OK] âœ“ Found 5 ISO(s) ready to boot

[2026-01-19T16:19:10+10:00] [INFO] ============================================
[2026-01-19T16:19:10+10:00] [INFO] ============================================
[2026-01-19T16:19:10+10:00] [INFO] Verification Summary
[2026-01-19T16:19:10+10:00] [INFO] Verification Summary
[2026-01-19T16:19:10+10:00] [INFO] ============================================
[2026-01-19T16:19:10+10:00] [INFO] ============================================
[1;33m
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  âš  ISSUES DETECTED                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
[0m
âš  FLASH partition missing (optional)

Recommended actions:
  â†’ Recommended: Rebuild from scratch (menu option 3)

Run rebuild now? [y/N]: [2026-01-19T16:19:14+10:00] [INFO] Logging to /home/wizard/Code/sonic-stick/LOGS/sonic-stick-2026-01-19T16:19:00+10:00.log
[2026-01-19T16:19:14+10:00] [INFO] Logging to /home/wizard/Code/sonic-stick/LOGS/sonic-stick-2026-01-19T16:19:00+10:00.log
[2026-01-19T16:19:14+10:00] [WARN] exfatresize (exfatprogs) is required to create FLASH partition
[2026-01-19T16:19:14+10:00] [WARN] exfatresize (exfatprogs) is required to create FLASH partition
[2026-01-19T16:19:14+10:00] [WARN] exfatresize (exfatprogs) is required to create FLASH partition
Install exfatprogs now? [Y/n]: Install exfatprogs now? [Y/n]: [2026-01-19T16:19:16+10:00] [INFO] Installing exfatprogs...
[2026-01-19T16:19:16+10:00] [INFO] Installing exfatprogs...
[2026-01-19T16:19:16+10:00] [INFO] Installing exfatprogs...
Hit:1 http://au.archive.ubuntu.com/ubuntu noble InRelease
Hit:1 http://au.archive.ubuntu.com/ubuntu noble InRelease
Hit:2 http://au.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:2 http://au.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:3 http://au.archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:3 http://au.archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
Hit:5 https://packages.microsoft.com/repos/code stable InRelease
Hit:5 https://packages.microsoft.com/repos/code stable InRelease
Reading package lists...Reading package lists...

Reading package lists...Reading package lists...

Building dependency tree...Building dependency tree...
Reading state information...
Reading state information...

exfatprogs is already the newest version (1.2.2-1build1).
0 upgraded, 0 newly installed, 0 to remove and 1229 not upgraded.
exfatprogs is already the newest version (1.2.2-1build1).
0 upgraded, 0 newly installed, 0 to remove and 1229 not upgraded.
[2026-01-19T16:19:20+10:00] [INFO] Starting complete rebuild on /dev/sdb
[2026-01-19T16:19:20+10:00] [INFO] Starting complete rebuild on /dev/sdb
[2026-01-19T16:19:20+10:00] [INFO] Starting complete rebuild on /dev/sdb
[2026-01-19T16:19:20+10:00] [INFO] Environment snapshot:
[2026-01-19T16:19:20+10:00] [INFO] Environment snapshot:
[2026-01-19T16:19:20+10:00] [INFO] Environment snapshot:
[2026-01-19T16:19:20+10:00] [INFO] uname: Linux wizard-dell-server 6.8.0-90-generic #91~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Thu Nov 20 15:20:45 UTC 2 x86_64 x86_64 x86_64 GNU/Linux
[2026-01-19T16:19:20+10:00] [INFO] uname: Linux wizard-dell-server 6.8.0-90-generic #91~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Thu Nov 20 15:20:45 UTC 2 x86_64 x86_64 x86_64 GNU/Linux
[2026-01-19T16:19:20+10:00] [INFO] uname: Linux wizard-dell-server 6.8.0-90-generic #91~22.04.1-Ubuntu SMP PREEMPT_DYNAMIC Thu Nov 20 15:20:45 UTC 2 x86_64 x86_64 x86_64 GNU/Linux
[2026-01-19T16:19:20+10:00] [INFO] lsblk: NAME     SIZE FSTYPE   LABEL;loop0      4K squashfs ;loop1   74.3M squashfs ;loop2   73.9M squashfs ;loop3  271.2M squashfs ;loop4  251.6M squashfs ;loop5  505.1M squashfs ;loop6  531.4M squashfs ;loop7   91.7M squashfs ;loop8   12.9M squashfs ;loop9   12.2M squashfs ;loop10  38.8M squashfs ;loop11  48.1M squashfs ;loop12   500K squashfs ;loop13   576K squashfs ;sda    238.5G          ;â”œâ”€sda1   512M vfat     ;â””â”€sda2   238G ext4     ;sdb    114.6G          ;â”œâ”€sdb1 114.6G exfat    SONIC;â””â”€sdb2    32M vfat     VTOYEFI;sr0     1024M          ;
[2026-01-19T16:19:20+10:00] [INFO] lsblk: NAME     SIZE FSTYPE   LABEL;loop0      4K squashfs ;loop1   74.3M squashfs ;loop2   73.9M squashfs ;loop3  271.2M squashfs ;loop4  251.6M squashfs ;loop5  505.1M squashfs ;loop6  531.4M squashfs ;loop7   91.7M squashfs ;loop8   12.9M squashfs ;loop9   12.2M squashfs ;loop10  38.8M squashfs ;loop11  48.1M squashfs ;loop12   500K squashfs ;loop13   576K squashfs ;sda    238.5G          ;â”œâ”€sda1   512M vfat     ;â””â”€sda2   238G ext4     ;sdb    114.6G          ;â”œâ”€sdb1 114.6G exfat    SONIC;â””â”€sdb2    32M vfat     VTOYEFI;sr0     1024M          ;
[2026-01-19T16:19:20+10:00] [INFO] lsblk: NAME     SIZE FSTYPE   LABEL;loop0      4K squashfs ;loop1   74.3M squashfs ;loop2   73.9M squashfs ;loop3  271.2M squashfs ;loop4  251.6M squashfs ;loop5  505.1M squashfs ;loop6  531.4M squashfs ;loop7   91.7M squashfs ;loop8   12.9M squashfs ;loop9   12.2M squashfs ;loop10  38.8M squashfs ;loop11  48.1M squashfs ;loop12   500K squashfs ;loop13   576K squashfs ;sda    238.5G          ;â”œâ”€sda1   512M vfat     ;â””â”€sda2   238G ext4     ;sdb    114.6G          ;â”œâ”€sdb1 114.6G exfat    SONIC;â””â”€sdb2    32M vfat     VTOYEFI;sr0     1024M          ;
[2026-01-19T16:19:20+10:00] [INFO] df: Filesystem      Size  Used Avail Mounted on;tmpfs           764M  2.1M  762M /run;/dev/sda2       234G   33G  189G /;tmpfs           3.8G   17M  3.8G /dev/shm;tmpfs           5.0M  4.0K  5.0M /run/lock;efivarfs        256K  205K   47K /sys/firmware/efi/efivars;/dev/sda1       511M  6.1M  505M /boot/efi;tmpfs           764M  124K  764M /run/user/1000;/dev/sdb2        32M   28M  4.6M /media/wizard/VTOYEFI;/dev/sdb1       115G   14G  102G /media/wizard/SONIC;
[2026-01-19T16:19:20+10:00] [INFO] df: Filesystem      Size  Used Avail Mounted on;tmpfs           764M  2.1M  762M /run;/dev/sda2       234G   33G  189G /;tmpfs           3.8G   17M  3.8G /dev/shm;tmpfs           5.0M  4.0K  5.0M /run/lock;efivarfs        256K  205K   47K /sys/firmware/efi/efivars;/dev/sda1       511M  6.1M  505M /boot/efi;tmpfs           764M  124K  764M /run/user/1000;/dev/sdb2        32M   28M  4.6M /media/wizard/VTOYEFI;/dev/sdb1       115G   14G  102G /media/wizard/SONIC;
[2026-01-19T16:19:20+10:00] [INFO] df: Filesystem      Size  Used Avail Mounted on;tmpfs           764M  2.1M  762M /run;/dev/sda2       234G   33G  189G /;tmpfs           3.8G   17M  3.8G /dev/shm;tmpfs           5.0M  4.0K  5.0M /run/lock;efivarfs        256K  205K   47K /sys/firmware/efi/efivars;/dev/sda1       511M  6.1M  505M /boot/efi;tmpfs           764M  124K  764M /run/user/1000;/dev/sdb2        32M   28M  4.6M /media/wizard/VTOYEFI;/dev/sdb1       115G   14G  102G /media/wizard/SONIC;
[H[2J[3J[H[2J[3J[0;35mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;35mâ•‘         SONIC STICK - COMPLETE REBUILD FROM SCRATCH       â•‘[0m
[0;35mâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—[0m
[0;35mâ•‘         SONIC STICK - COMPLETE REBUILD FROM SCRATCH       â•‘[0m
[0;35mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;35mThis will:[0m
[0;35mâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m

[0;35mThis will:[0m
  1. WIPE all data on /dev/sdb
  1. WIPE all data on /dev/sdb
  2. Install fresh Ventoy bootloader
  3. Copy all ISOs with organized structure
  4. Install custom Ventoy menu with organized categories
  5. Relabel main partition to SONIC
  2. Install fresh Ventoy bootloader
  3. Copy all ISOs with organized structure
  4. Install custom Ventoy menu with organized categories
  5. Relabel main partition to SONIC
  6. Create FLASH partition for logs/tracking (4GB ext4)
  7. Initialize library catalog system

  6. Create FLASH partition for logs/tracking (4GB ext4)
  7. Initialize library catalog system

[0;31mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;31mWARNING: ALL DATA ON /dev/sdb WILL BE PERMANENTLY ERASED![0m
[0;31mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;31mWARNING: ALL DATA ON /dev/sdb WILL BE PERMANENTLY ERASED![0m
[0;31mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;31mâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m


NAME     SIZE TYPE FSTYPE LABEL   MOUNTPOINT
sdb    114.6G disk                
â”œâ”€sdb1 114.6G part exfat  SONIC   /media/wizard/SONIC
â””â”€sdb2    32M part vfat   VTOYEFI /media/wizard/VTOYEFI
NAME     SIZE TYPE FSTYPE LABEL   MOUNTPOINT
sdb    114.6G disk                
â”œâ”€sdb1 114.6G part exfat  SONIC   /media/wizard/SONIC
â””â”€sdb2    32M part vfat   VTOYEFI /media/wizard/VTOYEFI

Type 'REBUILD' in capitals to continue: 
Type 'REBUILD' in capitals to continue: 

[0;34m[1/7] Unmounting all partitions on /dev/sdb...[0m
[0;34m[1/7] Unmounting all partitions on /dev/sdb...[0m
  Unmounting /dev/sdb1
  Unmounting /dev/sdb1
  Unmounting /dev/sdb2
  Unmounting /dev/sdb2

[0;34m[2/7] Wiping disk and installing fresh Ventoy...[0m
[1;33mThis will take 30-60 seconds...[0m

[0;34m[2/7] Wiping disk and installing fresh Ventoy...[0m
[1;33mThis will take 30-60 seconds...[0m

  Pre-wiping existing signatures...

  Pre-wiping existing signatures...
/dev/sdb: 8 bytes were erased at offset 0x00000200 (gpt): 45 46 49 20 50 41 52 54
/dev/sdb: 8 bytes were erased at offset 0x1ca63ffe00 (gpt): 45 46 49 20 50 41 52 54
/dev/sdb: 2 bytes were erased at offset 0x000001fe (PMBR): 55 aa
/dev/sdb: calling ioctl to re-read partition table: Success
/dev/sdb: 8 bytes were erased at offset 0x00000200 (gpt): 45 46 49 20 50 41 52 54
/dev/sdb: 8 bytes were erased at offset 0x1ca63ffe00 (gpt): 45 46 49 20 50 41 52 54
/dev/sdb: 2 bytes were erased at offset 0x000001fe (PMBR): 55 aa
/dev/sdb: calling ioctl to re-read partition table: Success
Creating new GPT entries in memory.
GPT data structures destroyed! You may now partition the disk using fdisk or
other utilities.
Creating new GPT entries in memory.
GPT data structures destroyed! You may now partition the disk using fdisk or
other utilities.

**********************************************
      Ventoy: 1.1.10  x86_64
      longpanda admin@ventoy.net
      https://www.ventoy.net
**********************************************


**********************************************
      Ventoy: 1.1.10  x86_64
      longpanda admin@ventoy.net
      https://www.ventoy.net
**********************************************

Disk : /dev/sdb
Disk : /dev/sdb
Model:  USB  SanDisk 3.2Gen1 (scsi)
Model:  USB  SanDisk 3.2Gen1 (scsi)
Size : 114 GiB
Style: GPT


[33mAttention:[0m
[33mYou will install Ventoy to /dev/sdb.[0m
[33mAll the data on the disk /dev/sdb will be lost!!![0m


[33mAll the data on the disk /dev/sdb will be lost!!![0m
Size : 114 GiB
Style: GPT


[33mAttention:[0m
[33mYou will install Ventoy to /dev/sdb.[0m
[33mAll the data on the disk /dev/sdb will be lost!!![0m


[33mAll the data on the disk /dev/sdb will be lost!!![0m

Create partitions on /dev/sdb by parted in GPT style ...

Create partitions on /dev/sdb by parted in GPT style ...
Done
Wait for partitions ...
Done
Wait for partitions ...
partition exist OK
create efi fat fs /dev/sdb2 ...
partition exist OK
create efi fat fs /dev/sdb2 ...
mkfs.fat 4.2 (2021-01-31)
mkfs.fat 4.2 (2021-01-31)
success
success
Wait for partitions $vPART1 and $vPART2 ...
Wait for partitions $vPART1 and $vPART2 ...
/dev/sdb1 exist OK
/dev/sdb1 exist OK
sed: can't read /sys/class/block/sdb2/dev: No such file or directory
sed: can't read /sys/class/block/sdb2/dev: No such file or directory
mknod -m 0660 /dev/sdb2 b  ...
mknod -m 0660 /dev/sdb2 b  ...
mknod: missing operand after â€˜bâ€™
Special files require major and minor device numbers.
Try 'mknod --help' for more information.
mknod: missing operand after â€˜bâ€™
Special files require major and minor device numbers.
Try 'mknod --help' for more information.
[FAIL] /dev/sdb1//dev/sdb2 does not exist
[FAIL] /dev/sdb1//dev/sdb2 does not exist
[2026-01-19T16:19:32+10:00] [INFO] Ventoy install log: /home/wizard/Code/sonic-stick/LOGS/ventoy-install-2026-01-19T16:19:14+10:00.log
[2026-01-19T16:19:32+10:00] [INFO] Ventoy install log: /home/wizard/Code/sonic-stick/LOGS/ventoy-install-2026-01-19T16:19:14+10:00.log
[2026-01-19T16:19:32+10:00] [INFO] Ventoy install log: /home/wizard/Code/sonic-stick/LOGS/ventoy-install-2026-01-19T16:19:14+10:00.log
Forcing kernel partition table reread...
Forcing kernel partition table reread...
Verifying partition table...
Verifying partition table...
Waiting for partition device nodes to appear...
Waiting for partition device nodes to appear...
Waiting for /dev/sdb1 and /dev/sdb2 (max 60s)...
Waiting for /dev/sdb1 and /dev/sdb2 (max 60s)...
âœ“ Partitions detected: /dev/sdb1 and /dev/sdb2
âœ“ Partitions detected: /dev/sdb1 and /dev/sdb2


[0;34m[3/7] Mounting Ventoy partition and copying ISOs...[0m
[0;34m[3/7] Mounting Ventoy partition and copying ISOs...[0m
mount: /mnt/sonic: wrong fs type, bad option, bad superblock on /dev/sdb1, missing codepage or helper program, or other error.
mount: /mnt/sonic: wrong fs type, bad option, bad superblock on /dev/sdb1, missing codepage or helper program, or other error.
[0;31mFailed to mount /dev/sdb1[0m
[0;31mFailed to mount /dev/sdb1[0m
[2026-01-19T16:19:41+10:00] [ERROR] Command failed (exit 1) at line 189: USB="$USB" VENTOY_VERSION="$VENTOY_VERSION_DEFAULT" bash "$SCRIPT_DIR/rebuild-from-scratch.sh"
[2026-01-19T16:19:41+10:00] [ERROR] Command failed (exit 1) at line 189: USB="$USB" VENTOY_VERSION="$VENTOY_VERSION_DEFAULT" bash "$SCRIPT_DIR/rebuild-from-scratch.sh"
